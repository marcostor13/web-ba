---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import pool from '../lib/db';

const [rows] = await pool.execute("SELECT * FROM projects WHERE category = 'Bathroom' ORDER BY created_at DESC");
const projects = rows as any[];
---

<Layout title="Bathrooms | BA Kitchen & Bath Remodeling">
  <Header />
  <main>
    <!-- Hero Section -->
    <section 
      class="relative h-screen min-h-screen flex items-end justify-start text-white px-6 md:px-[54px] pt-[110px] pb-10 md:pb-[100px] bg-cover bg-center" 
      style="background-image: linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.1)), url('/bathroom/Image_Header (7).png');"
    >
      <div class="reveal reveal-up">
        <h1 class="text-5xl md:text-[80px] leading-tight font-light text-white m-0">
          Bathrooms
        </h1>
      </div>
    </section>

    <!-- Projects Section -->
    <section class="bg-beige-light px-6 md:px-[54px] lg:px-[140px] py-[110px]">
      <div class="max-w-[1200px] mx-auto">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-10 gap-y-24">
          {projects.map((project, index) => (
            <div class="flex flex-col gap-8 reveal reveal-up" style={`animation-delay: ${index * 100}ms`}>
              <a href={`/projects/bathroom/${project.id}`} class="group relative aspect-square overflow-hidden block">
                <!-- Background Image -->
                <img 
                  src={project.main_image} 
                  alt={project.name} 
                  class="w-full h-full object-cover transition-transform duration-[2000ms] group-hover:scale-110" 
                />
                
                <!-- Dark Overlay -->
                <div class="absolute inset-0 bg-black/40 transition-opacity duration-500"></div>
                
                <!-- Logo Overlay (Center) -->
                {project.logo_overlay && (
                  <div class="absolute inset-0 flex items-center justify-center p-12">
                    <img 
                      src={project.logo_overlay} 
                      alt="Project Logo" 
                      class="max-w-[180px] max-h-[120px] object-contain brightness-0 invert opacity-100 group-hover:scale-110 transition-transform duration-700" 
                    />
                  </div>
                )}
                
                <!-- Hover Border Effect -->
                <div class="absolute inset-0 border border-gold opacity-0 group-hover:opacity-100 transition-opacity duration-500 m-4"></div>
              </a>
              
              <!-- Title Below -->
              <div class="text-center">
                <h3 class="text-[13px] uppercase tracking-[0.3em] font-medium text-black-soft/70">
                  {project.name}
                </h3>
              </div>
            </div>
          ))}
        </div>

        {projects.length === 0 && (
          <div class="py-32 text-center reveal reveal-up">
            <p class="text-[14px] uppercase tracking-widest text-black-soft/40 italic">Coming Soon</p>
          </div>
        )}
      </div>
    </section>
  </main>
</Layout>
